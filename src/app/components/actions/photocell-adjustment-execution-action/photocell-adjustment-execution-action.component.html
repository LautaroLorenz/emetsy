<fom
  novalidate
  [formGroup]="form"
>
  <p-fieldset>
    <ng-template pTemplate="header">
      <span>{{name}}</span>
    </ng-template>

    <p-message
      severity="{{photocellAdjustmentExecutionComplete ? 'success' : 'info'}}"
      text="{{helpText}}"
      styleClass="justify-content-start w-full mb-3"
    ></p-message>

    <div
      class="animation"
      [ngStyle]="{
        'opacity': form.get('photocellAdjustmentExecutionComplete')?.value ? '0' : '1',
        'height': form.get('photocellAdjustmentExecutionComplete')?.value ? '0' : 'initial'
      }"
    >
      <div class="border border-1 border-200 p-4 mb-4 border-round">
        <app-devices></app-devices>
      </div>
    </div>

    <div class="flex flex-1 mb-3 mt-4">
      <ng-container *ngIf="phases$ | async as phases">
        <app-phases [phases]="phases"></app-phases>
      </ng-container>
    </div>

  </p-fieldset>

  <div class="flex justify-content-end my-3">
    <p-button
      styleClass="p-button-outlined"
      label="Ajuste de fotocelulas realizado"
      (click)="completeAction()"
      [disabled]="photocellAdjustmentExecutionComplete || !connected || !initialized$.value || completing"
      [ngClass]="{
        'pointer-events-none': photocellAdjustmentExecutionComplete || !connected || !initialized$.value || completing
      }"
    ></p-button>
  </div>

</fom>